---
title: "[과목 I] 2024 ADsP 요약노트(3)"
categories: [Certificate, "[ADsP] 개념 및 문제풀이"]
---

# 과목 III 데이터분석

---

- 데이터 마트
    - 데이터 분석을 하기에 앞서 분석 목적에 맞춰 데이터를 수집, 변형하는 과정
    - 데이터 웨어하우스로부터 특정 사용자가 관심을 갖는 데이터들을 주제별, 부서별로 추출하여 모든 비교적 작은 규모의 데이터 웨어하우스다.
    - 효율적인 데이터 마트 개발을 위하여 R에서 제공하는 reshape, sqldf, plyr 등의 다양한 패키지를 활용할 수 있다.
- 전처리
    - 데이터를 정제(cleansing)하는 과정과 분석 변수를 처리하는 과정이 포함하는 광의의 개념이다.
    - 데이터 전처리 작업은 결측값과 이상값을 처리하는 ‘정제’ 작업 외에도 변수처리 작업이 포함된다. 분석 변수 처리 과정은 데이터 분석에 맞게 데이터셋의 변수 선택, 차원 축소, 파생변수 생성, 변수 변환, 클래스 불균형(불균형 데이터 처리) 등으로 이루어진다. 데이터 전처리는 ‘요리’에 빗대어 비유하자면, 본격적인 요리를 시작하기에 앞서 재료를 미리 손질하는 작업이다. 이때 요약변수와 파생변수를 생성하는 작업은 분석에 있어 매우 중요하다.
        - 요약변수: 원래의 데이터로부터 기본적인 통계 자료를 추출한 변수를 의미한다. 예컨대 총 합계, 평균, 횟수, 성별 구분 등 분석에 활용되는 기본적인 변수들로 재활용성이 높다. 기초적인 통계자료들이 여기에 속한다.
        - 파생변수: 범용으로 활용되는 기본적인 통계자료가 아닌, 특정한 목적을 갖고 조건을 만족하는 변수들을 새롭게 생성한 것을 의미한다. 예컨대 단순하게 합계를 구해 새로운 변수로 만들었다면 그것은 요약변수지만, 특정한 매장의 월별 합계 혹은 특정 기간 남성 고객의 구매 총액 등과 같이 목적 및 조건을 만족하는 변수를 생성했다면 그것은 파생변수이다. 파생변수에는 목적에 따른 특정한 의미가 부여된다. 주관적일 수 있으므로 논리적 타당성을 갖추어야 한다.
- ddply( )는 **데이터 프레임(d)을 입력으로 받아 데이터 프레임(d)을 내보내는 함수**다. 기준이 되는 변수를 2개 이상 묶어서 사용 가능, 원하는 임의의 함수를 작성해서 사용 가능
- c()는 Combind의 약자를 나타내는 명령어로, R에서 매우 자주 쓰이는 명령어이다. c()는 벡터를 만드는데 사용된다. 여기서 벡터라고 하면, 데이터에서 하나의 ’열(Column)’을 의미한다. 즉, 데이터가 세로로 저장된다고 생각하면 된다.
    
    ![스크린샷 2024-07-23 오후 10.37.35.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/ee15dc3d-1213-462c-8c2f-275c92f1a5a4/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_10.37.35.png)
    
- summarise는 데이터 요약, transform은 기존 데이터에 추가
- elapsed : **R작업과 운영체제 시스템 총 작업경과 시간 - 명령문의 시작부터 종료까지**

![스크린샷 2024-07-23 오후 11.54.23.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/f633e651-d360-4ed9-a40a-cb1f8879d431/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_11.54.23.png)

- 탐색적 분석(EDA; Exploratory Data Analysis)
    - 데이터를 이해하고 의미 있는 관계를 찾아내기 위해 데이터의 통곗값과 분포 등을 시각화하고 분석하는 것으로 이를 통해 분석 모델을 구축할 수 있다.

![스크린샷 2024-07-24 오전 12.01.24.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/f5b7ed03-744e-42f1-a30c-cc3cb4ccf4a0/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.01.24.png)

- 결측값
    - 결측값은 존재하지 않는 데이터를 의미하며, NA(Not Available)로 표현하지만 데이터를 수집하는 환경에 따라 null, 공백, -1 등 다양하게 표현될 수 있다.
    - 데이터 분석에 앞서 결측값 처리는 중요한 과제 중 하나다. 결측값을 삭제하는 것이 일반적이나 경우에 따라 의미를 갖는 경우도 있다.(예: 특정 설문 문항에 대해 결측값이 많다는 것은 해당 문항의 민감함을 나타내는 측도로써 활용 가능하다.)
    - 결측값 처리를 위한 대표적인 패키지로 Amelia와 DMwR2 패키지가 있다
- 결측값 대치 방법 ⭐️⭐️
    - 단순 대치법
        - 결측값이 존재하는 데이터를 삭제하는 방법이다.
        - 가장 쉬운 결측값 처리 방법이지만 결측값이 많은 경우 대량의 데이터 손실이 발생할 수 있다.
        - 단순 대치법을 위한 함수로 complete.cases 함수가 있다. complete.cases는 하나의 열에 결측값이 존재하면 FALSE, 존재하지 않으면 TRUE를 반환한다.
        
        ![스크린샷 2024-07-24 오전 12.00.11.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/b3430477-0731-411b-9345-e01e4eec8692/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.00.11.png)
        
    - 평균 대치법
        - 관측 또는 실험으로 얻은 데이터를 대표할 수 있는 평균 혹은 중앙값으로 결측값을 대치하여 불완전 한 자료를 완전한 자료로 만드는 방법이다.
        - 비조건부 평균 대치법과 조건부 평균 대치법이 있다. 비조건부 평균 대치법은 데이터의 평균값으로 결측값을 대치하는 반면 조건부 평균 대치법은 실제 값들을 분석하여 회귀분석을 활용하는 대치 방 법이다.
        - 평균값 혹은 중앙값을 직접 구하여 결측값을 대치해도 되지만 DMWR2 패키지의 central Imputation 함수를 사용하여 쉽게 대치할 수 있다.
        - na.rm은 결측치가 있는 다른 행에 영향을 주지 않지만, na.omit은 결측치가 있는 행 자체를 제외해버리는 차이가 있다.
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/c692e8f2-4863-4569-916d-cfe386aa9853/Untitled.png)
        
    - 단순 확률 대치법
        - 평균 대치법에서 추정량 표준 오차의 과소 추정 문제를 보완하고자 고안된 방법이다. 대표적인 방법으로 K-Nearest Neighbor 방법이 있다.
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/cf24489a-f600-4196-82ba-a6c7dd87ae9f/Untitled.png)
        
        - K-Nearest Neighbor 방법: K 최근접 이웃 알고리즘으로 주변 K개의 데이터 중 가장 많은 데이터 로 대치하는 방법이다. 아래 그림에서 K = 1인 경우 결측값으로 파란색이 유력해 보이지만 K= 4인 경우에는 결측값으로 검정색이 유력해 보인다. 따라서 주변 몇 개의 데이터가 결측값을 대치하기 좋 은가에 대한 K를 선정하기가 쉽지 않다.
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/7165a328-6f41-4a56-9113-f208ba04a90a/Untitled.png)
        
    - 다중 대치법
        - 여러 번의 대치를 통해 11개의 임의 완전자료를 만드는 방법으로, 결측값 **대치, 분석, 결합**의 세 단계
        로 구성되어 있다.
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/ca7639d8-f336-4a0a-b839-b19b5a1980d1/Untitled.png)
        
        ```r
        # 테스트를 위한 결측값을 가진 iris 데이터 생성
        > copy_iris <- iris # 원본 데이터를 유지
        > copy iris[ sample( 1 : 150 , 30 ) , 1 ] 〈- NA # Sepal.Length에 30개의 결측값 생성
        > library ( Amelia)
        > iris_imp <- amelia( copy_iris, m= 3, cs = "Species" ) 
        # cs는 cross-sectional로 분석에 포함될 정보를 의미 
        # 위 amelia에서 m 값을 그대로 imputation의 데이터셋에 사용한다.
        > copy_iris$Sepal.Length <- iris_imp$imputations[[3]]$Sepal.Length
        ```
        

![스크린샷 2024-07-24 오전 12.50.04.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/0eebcab9-67bc-4763-b58f-57c0a0e7857d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.50.04.png)

- 이상값 판단 ⭐️⭐️⭐️
    - ESD(Extreme Studentized Deviation)
        - 평균으로부터 '표준편차 3'만큼 떨어진 값들을 이상값으로 인식하는 방법이다. 정규분포에서 99.7%의 자료들은 '표준편차 3' 안에 위치하므로 전체 데이터의 약 0.3퍼센트를 이상값으로 구분한다.
    - 사분위수
        - 사분위수를 이용하여 25%에 해당하는 값(Q1)과 75%에 해당하는 값(Q3)을 활용하여 이상치를 판 단하는 방법이다. 자료를 크기 순서대로 나열했을 때 사분위수로 나눌 수 있다.
        - 가장 작은 하한 사분위수를 Q1이라고 하고, 가장 큰 사분위수인 상한 사분위수는 Q3라고 한다. 여 기서 IQR이란 사분위의 정상 범위인 Q1과 Q3 사이를 의미하며, 사분범위(Interquartile Range, IQR)라고 한다.
        - 일반적으로 사분범위에서 1.5분위수를 벗어나는 경우 이상치로 판단한다. 다시 말해 Q1 - 1.5 x IQR(하한 최솟값)보다 작거나 Q3 + 1.5 x IQR(상한 최댓값)보다 큰 값은 이상값으로 간주한다.
        - 시각적으로 상자 그림의 아웃라이어에 위치해 점으로 표현된 데이터를 이상값으로 판단할 수 있다.
        - 사분위수는 측정값을 최솟값에서 최댓값까지 오름차순으로 정렬한 자료를 4등분했을 때 각 등분 위치에 해당 하는 값을 의미한다. IQR은 1분위 수(Q1)부터 3분위 수(Q3)까지의 범위를 의미하며. 2분위 수(Q2)는 앞서 자주 언급한 중앙값(median)이다.
        
        ![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/87c861f4-f71d-4728-9027-824609215e67/Untitled.png)
        

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/e8be0254-ebd1-4e20-95dc-893a550d92b3/Untitled.png)

![스크린샷 2024-07-24 오전 1.21.08.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/44afc2de-7840-463d-8c26-1321c320c6b1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_1.21.08.png)

![스크린샷 2024-07-24 오전 1.25.12.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/80b48dd2-8580-440c-aac0-49adc0e887f2/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_1.25.12.png)

![스크린샷 2024-07-24 오전 1.26.58.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/16823ef6-df6b-446a-acd4-3a4dad8babe0/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_1.26.58.png)

![스크린샷 2024-07-24 오전 1.46.19.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/ddfbeb2a-3441-4c70-a7d8-fe7356b8a1ee/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_1.46.19.png)

![스크린샷 2024-07-24 오전 1.50.29.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/17b5649d-9a82-4328-ac08-d1742525ea6c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_1.50.29.png)

![스크린샷 2024-07-24 오전 1.52.13.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/0ce5c08c-ca7d-4643-a6d7-80618fd58c8d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-24_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_1.52.13.png)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/e8102d9b-cd26-429c-9869-55590d6f7c0a/Untitled.png)

- 95%까지 허용하는 것이 일반적이다. 95%를 벗어나면 기각역이다.

![스크린샷 2024-07-25 오후 9.21.21.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/3e2d8e2b-4ab3-463b-b14f-cbdd834a0993/114e3bba-35a3-42b9-9a2d-75b48a3f7e5e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-07-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.21.21.png)

- 유의수준을 보통 5%로 가정한다. 나의 주장이 틀릴 확률이 3%일 경우, 너의 말이 맞다. ⇒ 귀무가설 기각.

**참고 자료**

---

- [https://mustlearning.tistory.com/5 - c()의 활용](https://mustlearning.tistory.com/5)
- [https://meaownworld.tistory.com/entry/R에서-벡터테이블-행열-seq-rep-함수-이용](https://meaownworld.tistory.com/entry/R%EC%97%90%EC%84%9C-%EB%B2%A1%ED%84%B0%ED%85%8C%EC%9D%B4%EB%B8%94-%ED%96%89%EC%97%B4-seq-rep-%ED%95%A8%EC%88%98-%EC%9D%B4%EC%9A%A9)